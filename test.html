<!DOCTYPE html>
<html>
<head>
  <title>FCM Token Generator</title>
</head>
<body>
  <h2>Firebase FCM Token Demo</h2>
  <button id="btn">Get FCM Token</button>
  <pre id="output"></pre>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getMessaging, getToken } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-messaging.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBCT1UJcwqjKdsXL-6N_7qqa3lZRdAsqoE",
      authDomain: "gitdrive-m4hfj.firebaseapp.com",
      projectId: "gitdrive-m4hfj",
      storageBucket: "gitdrive-m4hfj.firebasestorage.app",
      messagingSenderId: "471156925064",
      appId: "1:471156925064:web:0bd4f67ad521b9a3d9b53d"
    };

    const app = initializeApp(firebaseConfig);
    const messaging = getMessaging(app);

    const btn = document.getElementById("btn");
    const output = document.getElementById("output");

    btn.onclick = async () => {
      try {
        // ask notification permission
        const permission = await Notification.requestPermission();
        if (permission !== "granted") {
          alert("Permission denied");
          return;
        }

        const token = await getToken(messaging, {
          vapidKey: "BDQEZLqUGJepg0JgR9t-jpI5256vAniU6O_hJEKe4Tr55qqBvlYmsat_VEHdts5IPK_llAajDoV6PxmflvYOxjA"
        });

        output.textContent = token;
        console.log("FCM Token:", token);

      } catch (err) {
        console.error(err);
      }
    };
  </script>
  <script src="firebase-messaging-sw.js"></script>
</body>
</html>